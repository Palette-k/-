{"ast":null,"code":"import { defineComponent, ref, computed, watchEffect, resolveComponent, openBlock, createElementBlock, normalizeClass, withKeys, createCommentVNode, createBlock, Fragment, renderList, toDisplayString } from 'vue';\nimport { DArrowLeft, DArrowRight, MoreFilled } from '@element-plus/icons-vue';\nimport '../../../../hooks/index.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nconst paginationPagerProps = {\n  currentPage: {\n    type: Number,\n    default: 1\n  },\n  pageCount: {\n    type: Number,\n    required: true\n  },\n  pagerCount: {\n    type: Number,\n    default: 7\n  },\n  disabled: Boolean\n};\n\nconst _sfc_main = defineComponent({\n  name: \"ElPaginationPager\",\n  components: {\n    DArrowLeft,\n    DArrowRight,\n    MoreFilled\n  },\n  props: paginationPagerProps,\n  emits: [\"change\"],\n\n  setup(props, {\n    emit\n  }) {\n    const nsPager = useNamespace(\"pager\");\n    const nsIcon = useNamespace(\"icon\");\n    const showPrevMore = ref(false);\n    const showNextMore = ref(false);\n    const quickPrevHover = ref(false);\n    const quickNextHover = ref(false);\n    const pagers = computed(() => {\n      const pagerCount = props.pagerCount;\n      const halfPagerCount = (pagerCount - 1) / 2;\n      const currentPage = Number(props.currentPage);\n      const pageCount = Number(props.pageCount);\n      let showPrevMore2 = false;\n      let showNextMore2 = false;\n\n      if (pageCount > pagerCount) {\n        if (currentPage > pagerCount - halfPagerCount) {\n          showPrevMore2 = true;\n        }\n\n        if (currentPage < pageCount - halfPagerCount) {\n          showNextMore2 = true;\n        }\n      }\n\n      const array = [];\n\n      if (showPrevMore2 && !showNextMore2) {\n        const startPage = pageCount - (pagerCount - 2);\n\n        for (let i = startPage; i < pageCount; i++) {\n          array.push(i);\n        }\n      } else if (!showPrevMore2 && showNextMore2) {\n        for (let i = 2; i < pagerCount; i++) {\n          array.push(i);\n        }\n      } else if (showPrevMore2 && showNextMore2) {\n        const offset = Math.floor(pagerCount / 2) - 1;\n\n        for (let i = currentPage - offset; i <= currentPage + offset; i++) {\n          array.push(i);\n        }\n      } else {\n        for (let i = 2; i < pageCount; i++) {\n          array.push(i);\n        }\n      }\n\n      return array;\n    });\n    watchEffect(() => {\n      const halfPagerCount = (props.pagerCount - 1) / 2;\n      showPrevMore.value = false;\n      showNextMore.value = false;\n\n      if (props.pageCount > props.pagerCount) {\n        if (props.currentPage > props.pagerCount - halfPagerCount) {\n          showPrevMore.value = true;\n        }\n\n        if (props.currentPage < props.pageCount - halfPagerCount) {\n          showNextMore.value = true;\n        }\n      }\n    });\n\n    function onMouseenter(direction) {\n      if (props.disabled) return;\n\n      if (direction === \"left\") {\n        quickPrevHover.value = true;\n      } else {\n        quickNextHover.value = true;\n      }\n    }\n\n    function onEnter(e) {\n      const target = e.target;\n\n      if (target.tagName.toLowerCase() === \"li\" && Array.from(target.classList).includes(\"number\")) {\n        const newPage = Number(target.textContent);\n\n        if (newPage !== props.currentPage) {\n          emit(\"change\", newPage);\n        }\n      }\n    }\n\n    function onPagerClick(event) {\n      const target = event.target;\n\n      if (target.tagName.toLowerCase() === \"ul\" || props.disabled) {\n        return;\n      }\n\n      let newPage = Number(target.textContent);\n      const pageCount = props.pageCount;\n      const currentPage = props.currentPage;\n      const pagerCountOffset = props.pagerCount - 2;\n\n      if (target.className.includes(\"more\")) {\n        if (target.className.includes(\"quickprev\")) {\n          newPage = currentPage - pagerCountOffset;\n        } else if (target.className.includes(\"quicknext\")) {\n          newPage = currentPage + pagerCountOffset;\n        }\n      }\n\n      if (!isNaN(newPage)) {\n        if (newPage < 1) {\n          newPage = 1;\n        }\n\n        if (newPage > pageCount) {\n          newPage = pageCount;\n        }\n      }\n\n      if (newPage !== currentPage) {\n        emit(\"change\", newPage);\n      }\n    }\n\n    return {\n      showPrevMore,\n      showNextMore,\n      quickPrevHover,\n      quickNextHover,\n      pagers,\n      nsPager,\n      nsIcon,\n      onMouseenter,\n      onPagerClick,\n      onEnter\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"aria-current\"];\nconst _hoisted_2 = [\"aria-current\"];\nconst _hoisted_3 = [\"aria-current\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_d_arrow_left = resolveComponent(\"d-arrow-left\");\n\n  const _component_more_filled = resolveComponent(\"more-filled\");\n\n  const _component_d_arrow_right = resolveComponent(\"d-arrow-right\");\n\n  return openBlock(), createElementBlock(\"ul\", {\n    class: normalizeClass(_ctx.nsPager.b()),\n    onClick: _cache[4] || (_cache[4] = (...args) => _ctx.onPagerClick && _ctx.onPagerClick(...args)),\n    onKeyup: _cache[5] || (_cache[5] = withKeys((...args) => _ctx.onEnter && _ctx.onEnter(...args), [\"enter\"]))\n  }, [_ctx.pageCount > 0 ? (openBlock(), createElementBlock(\"li\", {\n    key: 0,\n    class: normalizeClass([{\n      active: _ctx.currentPage === 1,\n      disabled: _ctx.disabled\n    }, \"number\"]),\n    \"aria-current\": _ctx.currentPage === 1,\n    tabindex: \"0\"\n  }, \" 1 \", 10, _hoisted_1)) : createCommentVNode(\"v-if\", true), _ctx.showPrevMore ? (openBlock(), createElementBlock(\"li\", {\n    key: 1,\n    class: normalizeClass([\"more\", \"btn-quickprev\", _ctx.nsIcon.b(), {\n      disabled: _ctx.disabled\n    }]),\n    onMouseenter: _cache[0] || (_cache[0] = $event => _ctx.onMouseenter(\"left\")),\n    onMouseleave: _cache[1] || (_cache[1] = $event => _ctx.quickPrevHover = false)\n  }, [_ctx.quickPrevHover ? (openBlock(), createBlock(_component_d_arrow_left, {\n    key: 0\n  })) : (openBlock(), createBlock(_component_more_filled, {\n    key: 1\n  }))], 34)) : createCommentVNode(\"v-if\", true), (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.pagers, pager => {\n    return openBlock(), createElementBlock(\"li\", {\n      key: pager,\n      class: normalizeClass([{\n        active: _ctx.currentPage === pager,\n        disabled: _ctx.disabled\n      }, \"number\"]),\n      \"aria-current\": _ctx.currentPage === pager,\n      tabindex: \"0\"\n    }, toDisplayString(pager), 11, _hoisted_2);\n  }), 128)), _ctx.showNextMore ? (openBlock(), createElementBlock(\"li\", {\n    key: 2,\n    class: normalizeClass([\"more\", \"btn-quicknext\", _ctx.nsIcon.b(), {\n      disabled: _ctx.disabled\n    }]),\n    onMouseenter: _cache[2] || (_cache[2] = $event => _ctx.onMouseenter(\"right\")),\n    onMouseleave: _cache[3] || (_cache[3] = $event => _ctx.quickNextHover = false)\n  }, [_ctx.quickNextHover ? (openBlock(), createBlock(_component_d_arrow_right, {\n    key: 0\n  })) : (openBlock(), createBlock(_component_more_filled, {\n    key: 1\n  }))], 34)) : createCommentVNode(\"v-if\", true), _ctx.pageCount > 1 ? (openBlock(), createElementBlock(\"li\", {\n    key: 3,\n    class: normalizeClass([{\n      active: _ctx.currentPage === _ctx.pageCount,\n      disabled: _ctx.disabled\n    }, \"number\"]),\n    \"aria-current\": _ctx.currentPage === _ctx.pageCount,\n    tabindex: \"0\"\n  }, toDisplayString(_ctx.pageCount), 11, _hoisted_3)) : createCommentVNode(\"v-if\", true)], 34);\n}\n\nvar Pager = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Pager as default };","map":null,"metadata":{},"sourceType":"module"}