{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n//这里导入接口？\n//import {register} from '@/service/api';\nimport request from \"@/utils/request\";\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Register\",\n\n  data() {\n    const validateCheckPass = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value != this.user.pass) {\n        callback(new Error(\"两次输入的密码不一致\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      user: {\n        username: '',\n        account: '',\n        pass: '',\n        checkPass: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"用户名不可为空\",\n          trigger: \"blur\"\n        }],\n        account: [{\n          required: true,\n          message: '请输入邮箱或手机号',\n          trigger: 'blur'\n        },\n        /*{\n          type: 'email',\n          message: 'Please input correct email address',\n          trigger: ['blur', 'change'],\n        },*/\n        {\n          pattern: /^1[34578]\\d{9}|(([a-zA-Z0-9]+[-_.]?)+@[a-zA-Z0-9]+\\.[a-z]+)$/,\n          message: '请输入正确的手机号或邮箱'\n        }],\n        pass: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: 'blur'\n        }, {\n          pattern: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$/,\n          message: '密码必须同时包含数字与字母,且长度为8-20位'\n        }],\n        checkPass: [{\n          validator: validateCheckPass,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    //这里方法要测试改改\n    registerSubmit(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          /* register({\n            account:this.user.account,\n            name: this.user.name,\n            password:this.user.checkPass\n          }).then((data)=> {\n            console.log(data)\n            if(data.code === 200) {\n              localStorage.setItem('token',data.data.token)\n              this.$router.push('/login');\n            }else if(data.code === 400){\n              this.$message.error(data.msg) //返回错误信息，即CommonResult里的msg\n            }\n          })*/\n          request.post(\"/user/register\", this.user).then(data => {\n            if (data.code === 200) {\n              console.log(data);\n              localStorage.setItem('token', data.data.token);\n              this.$router.push('/login');\n            } else {\n              console.log(data);\n              this.$message.error(data.msg); //返回错误信息，即CommonResult里的msg\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA+BA;AACA;AACA,OAAOA,OAAP,MAAoB,iBAApB;AAEA,eAAe;AACb;AACAC,MAAI,EAAE,UAFO;;AAGbC,MAAI,GAAE;AACJ,UAAMC,iBAAgB,GAAG,CAACC,IAAD,EAAOC,KAAP,EAAaC,QAAb,KAA0B;AACjD,UAAG,CAACD,KAAJ,EAAU;AACRC,gBAAQ,CAAC,IAAIC,KAAJ,CAAU,SAAV,CAAD,CAAR;AACD,OAFD,MAEM,IAAGF,KAAI,IAAK,KAAKG,IAAL,CAAUC,IAAtB,EAA4B;AAChCH,gBAAQ,CAAC,IAAIC,KAAJ,CAAU,YAAV,CAAD,CAAR;AACD,OAFK,MAEA;AACJD,gBAAQ;AACV;AACF,KARA;;AASA,WAAM;AACJE,UAAI,EAAC;AACHE,gBAAQ,EAAC,EADN;AAEHC,eAAO,EAAE,EAFN;AAGHF,YAAI,EAAC,EAHF;AAIHG,iBAAS,EAAC;AAJP,OADD;AAOJC,WAAK,EAAC;AACJH,gBAAQ,EAAC,CACP;AAACI,kBAAQ,EAAC,IAAV;AAAeC,iBAAO,EAAC,SAAvB;AAAiCC,iBAAO,EAAC;AAAzC,SADO,CADL;AAIJL,eAAO,EAAE,CAAC;AACRG,kBAAQ,EAAE,IADF;AAERC,iBAAO,EAAE,WAFD;AAGRC,iBAAO,EAAE;AAHD,SAAD;AAKP;;;;;AAKA;AACEC,iBAAO,EAAE,8DADX;AAEEF,iBAAO,EAAE;AAFX,SAVO,CAJL;AAmBJN,YAAI,EAAC,CAAC;AACJK,kBAAQ,EAAC,IADL;AAEJC,iBAAO,EAAE,OAFL;AAGJC,iBAAO,EAAE;AAHL,SAAD,EAIH;AACAC,iBAAO,EAAE,0CADT;AACqDF,iBAAO,EAAE;AAD9D,SAJG,CAnBD;AA0BJH,iBAAS,EAAE,CAAC;AACVM,mBAAS,EAAEf,iBADD;AAEVa,iBAAO,EAAC;AAFE,SAAD;AA1BP;AAPF,KAAN;AAsCI,GAnDO;;AAoDTG,SAAO,EAAE;AACX;AACIC,kBAAc,CAACC,QAAD,EAAW;AACvB,WAAKC,KAAL,CAAWD,QAAX,EAAqBE,QAArB,CAA+BC,KAAD,IAAW;AACvC,YAAIA,KAAJ,EAAW;AACT;;;;;;;;;;;;;AAaAxB,iBAAO,CAACyB,IAAR,CAAa,gBAAb,EAA+B,KAAKjB,IAApC,EAA0CkB,IAA1C,CAA+CxB,IAAG,IAAK;AACrD,gBAAIA,IAAI,CAACyB,IAAL,KAAc,GAAlB,EAAuB;AACrBC,qBAAO,CAACC,GAAR,CAAY3B,IAAZ;AACA4B,0BAAY,CAACC,OAAb,CAAqB,OAArB,EAA8B7B,IAAI,CAACA,IAAL,CAAU8B,KAAxC;AACA,mBAAKC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;AACF,aAJA,MAIO;AACLN,qBAAO,CAACC,GAAR,CAAY3B,IAAZ;AACA,mBAAKiC,QAAL,CAAcC,KAAd,CAAoBlC,IAAI,CAACmC,GAAzB,EAFK,CAEyB;AAChC;AACD,WATD;AAUF,SAxBA,MAwBO;AACLT,iBAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,iBAAO,KAAP;AACF;AACD,OA7BD;AA+BF;;AAlCO;AApDA,CAAf","names":["request","name","data","validateCheckPass","rule","value","callback","Error","user","pass","username","account","checkPass","rules","required","message","trigger","pattern","validator","methods","registerSubmit","formName","$refs","validate","valid","post","then","code","console","log","localStorage","setItem","token","$router","push","$message","error","msg"],"sourceRoot":"","sources":["D:\\IDEA\\CommentSystem\\vue\\src\\components\\Register.vue"],"sourcesContent":["<template>\n  <div>\n    <el-form status-icon ref=\"RegisterForm\" :model=\"user\" :rules=\"rules\" label-width=\"80px\" class=\"register-box\">\n      <h2 class=\"register-title\">注册</h2>\n      <el-form-item label=\"账号申请\" prop=\"account\">\n        <el-input type=\"text\" placeholder=\"请输入邮箱/手机号\" v-model=\"user.account\"/>\n      </el-form-item>\n      <el-form-item label=\"用户名\" prop=\"username\">\n        <el-input type=\"text\" placeholder=\"请输入用户名\" v-model=\"user.username\"/>\n      </el-form-item>\n      <el-form-item label=\"密码\" prop=\"pass\">\n        <el-input v-model=\"user.pass\" type=\"password\" show-password autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码\" prop=\"checkPass\">\n        <el-input v-model=\"user.checkPass\" type=\"password\"  autocomplete=\"off\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-col :span=\"6\"><el-button type=\"warning\" @click=\"registerSubmit('ruleForm')\" style=\"width:100%;\">注册</el-button></el-col>\n          <el-col :span=\"11\" :offset=\"7\">\n            <el-link href=\"/login\" target= \"_self\"\n                     type=\"primary\" fontsize=\"small\"  :underline=\"false\">\n            已有账号>>请登录\n            </el-link>\n          </el-col>\n      </el-form-item>\n    </el-form>\n\n  </div>\n</template>\n\n<script>\n//这里导入接口？\n//import {register} from '@/service/api';\nimport request from \"@/utils/request\";\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: \"Register\",\n  data(){\n    const validateCheckPass =(rule, value,callback) => {\n      if(!value){\n        callback(new Error(\"请再次输入密码\"));\n      }else if(value != this.user.pass) {\n        callback(new Error(\"两次输入的密码不一致\"));\n      }else {\n        callback();\n      }\n    }\n    return{\n      user:{\n        username:'',\n        account: '',\n        pass:'',\n        checkPass:''\n      },\n      rules:{\n        username:[\n          {required:true,message:\"用户名不可为空\",trigger:\"blur\"}\n        ],\n        account: [{\n          required: true,\n          message: '请输入邮箱或手机号',\n          trigger: 'blur',\n        },\n          /*{\n            type: 'email',\n            message: 'Please input correct email address',\n            trigger: ['blur', 'change'],\n          },*/\n          {\n            pattern: /^1[34578]\\d{9}|(([a-zA-Z0-9]+[-_.]?)+@[a-zA-Z0-9]+\\.[a-z]+)$/ ,\n            message: '请输入正确的手机号或邮箱'\n\n          }],\n        pass:[{\n          required:true,\n          message: \"请输入密码\",\n          trigger: 'blur'\n        },{\n          pattern: /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$/, message: '密码必须同时包含数字与字母,且长度为8-20位'\n        }],\n        checkPass: [{\n          validator: validateCheckPass,\n          trigger:'blur'\n        }],\n      }\n      }},\n      methods: {\n    //这里方法要测试改改\n        registerSubmit(formName) {\n          this.$refs[formName].validate((valid) => {\n            if (valid) {\n              /* register({\n                account:this.user.account,\n                name: this.user.name,\n                password:this.user.checkPass\n              }).then((data)=> {\n                console.log(data)\n                if(data.code === 200) {\n                  localStorage.setItem('token',data.data.token)\n                  this.$router.push('/login');\n                }else if(data.code === 400){\n                  this.$message.error(data.msg) //返回错误信息，即CommonResult里的msg\n                }\n              })*/\n              request.post(\"/user/register\", this.user).then(data => {\n                if (data.code === 200) {\n                  console.log(data);\n                  localStorage.setItem('token', data.data.token)\n                  this.$router.push('/login');\n                } else {\n                  console.log(data);\n                  this.$message.error(data.msg) //返回错误信息，即CommonResult里的msg\n                }\n              })\n            } else {\n              console.log('error submit!!');\n              return false;\n            }\n          })\n\n        }\n      }\n    }\n\n\n</script>\n\n<style scoped>\n/*样式还没写*/\n.register-box{\n  border:1px solid #DCDFE6;\n  width: 350px;\n  margin:180px auto;\n  padding: 35px 35px 15px 35px;\n  border-radius: 5px;\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  box-shadow: 0 0 25px #909399;\n}\n.register-title{\n  text-align:center;\n  margin: 0 auto 40px auto;\n  color: #2955ad;\n}\n\n\n</style>"]},"metadata":{},"sourceType":"module"}